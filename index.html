<!DOCTYPE html>
<html>
  <head>
    <title>Borg Documentation</title>
    <link rel="stylesheet" href="stylesheets/global.css">
  </head>
  <body>
    <div id="content">
      <nav id="top">
        <div class="wrapper">
          <h1 class="logo">Borg Documentation</h1>
          <ul class="right">
            <li><a href="https://github.com/mikesmullin/borg">Github</a></li>
            <li class="toc"><a href="index.html#top">Docs</a></li>
            <li><a href="index.html#contributing">Contribute</a></li>
            <li><a href="https://github.com/mikesmullin/borg/graphs/contributors">Credits</a></li>
          </ul>
          <div class="clear"></div>
        </div>
      </nav>
      <header>
        <div class="wrapper">
          <h2>Borg Documentation (v0.0.1)</h2>
          <p>This information is designed to make you immediately productive with <strong><a href="https://www.npmjs.com/package/borg">Borg v0.0.7</a></strong>.<br>When additional versions are released, previous versions will be linked here.<br>Let&rsquo;s get started!</p>
        </div>
      </header>
      <article>
        <div class="wrapper">
          <h2 id="getting-started">1. Getting Started</h2>
          <p>Feel free to watch the <a href="http://youtu.be/ixVLRgVgQBg">5min Quick Start video </a> which covers this chapter:</p>
          <div class="video"><iframe width="560" height="315" src="http://www.youtube.com/embed/ixVLRgVgQBg" frameborder="0" allowfullscreen></iframe></div>
          <h3 id="install-node.js">1.1. Install Node.JS</h3>
          <p>Using <a href="https://github.com/creationix/nvm">NVM </a> to install <a href="http://nodejs.org">Node.JS</a> is recommended.</p>
          <pre><code class="nohighlight">curl -L https://raw.github.com/creationix/nvm/master/install.sh | sh
source ~/.bashrc # or close and reopen the terminal
nvm install v0.10.35 # latest stable preferred
nvm use v0.10.35
nvm alias default v0.10.35</code></pre>
          <h3 id="install-borg">1.2. Install Borg</h3>
          <pre><code class="nohighlight">npm install borg -g</code></pre>
          <h3 id="generate-a-new-project">1.3. Generate a New Project</h3>
          <pre><code class="nohighlight">borg init Devops
cd Devops/</code></pre>
          <p>Or, hit the ground running by cloning our <a href="https://github.com/mikesmullin/borg-sample-project">existing sample project</a> and follow along with the <a href="index.html#">10min Sample Project video</a> to assimilate your first machine:</p>
          <div class="video"><iframe width="560" height="315" src="http://www.youtube.com/embed/62seGFI1fZw" frameborder="0" allowfullscreen></iframe></div>
          <h3 id="explore-help">1.4. Explore Help</h3>
          <p>The <code>borg</code> <strong>Command Line Interface (<a href="http://en.wikipedia.org/wiki/Command-line_interface">CLI</a>)</strong> contains many commands which are not documented here. That documentation
            is expected to be accessed directly, beginning with the following command:
          </p>
          <pre><code class="nohighlight">borg help</code></pre>
          <p><strong style="color:#999">NOTICE:</strong> Most <code>borg</code> CLI commands require your working directory to be the project root.</p>
          <h2 id="cloud-integration">2. Cloud Integration</h2>
          <p>
            Though abstracted to integrate with any cloud provider,
            only <a href="http://aws.amazon.com/">Amazon Web Services</a> integration is implemented at present.
          </p>
          <p><strong style="color:#999">ADVERTISEMENT:</strong> Accepting pull requests to support other <a href="http://talkincloud.com/talkin039-cloud-top-100-cloud-services-providers/top-100-cloud-services-providers-list-2013-ranked-0">Cloud Provider APIs</a>.</p>
          <h3 id="amazon-web-services">2.1. Amazon Web Services</h3>
          <p>This integration depends on the AWS CLI utility being installed:</p>
          <pre><code class="nohighlight">cd /tmp
wget https://s3.amazonaws.com/aws-cli/awscli-bundle.zip
unzip awscli-bundle.zip
sudo ./awscli-bundle/install -i /usr/local/aws -b /usr/local/bin/aws
aws --version # test</code></pre>
          <p>and configured:</p>
          <pre><code class="nohighlight">aws configure
Access Key ID: your-aws-access-key-id
Secret Access Key: your-aws-secret-key</code></pre>
          <p>For more information, please see:<br><a href="http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-linux.html">Setting Up the Amazon EC2 Command Line Interface Tools</a></p>
          <h2 id="introduction">3. Introduction</h2>
          <h3 id="vernacular">3.1. Vernacular</h3>
          <ul>
            <li><strong>script: </strong>file containing code listing steps to complete orchestration.<br><br></li>
            <li> <strong>resource: </strong>named function organizing common steps for reuse across multiple scripts; often with the secondary goal of becoming operating system agnostic.<br><br></li>
            <li> <strong>server: </strong>file containing code defining how remote machines are named and addressed, and which scripts must be applied in order to complete their orchestration.<br><br></li>
            <li> <strong>attribute: </strong>server variable; representing static data, dynamic runtime calculation functions, or personal preferences/overrides for use by scripts at runtime.<br><br></li>
            <li> <strong>networks.coffee: </strong>file containing a list of servers and their attributes--as well as the relationship of one server to another in a hierarchy of datacenters, groups, server types, and server instances.<br><br></li>
            <li> <strong>datacenter: </strong>the outermost unit available for the grouping of reusable server definitions (e.g., one datacenter may contain two or more instances of the same server)<br><br></li>
            <li> <strong>group: </strong>another layer of organization available for the grouping of servers within datacenters; typically named after the environment and project (e.g., a datacenter may contain a group for the production environment of Project A as well as the staging environment for Project B, both of which contain separate instances of the same type of server)<br><br></li>
            <li> <strong>borg create: </strong>to provision a new empty remote server via cloud provider apis.<br><br></li>
            <li> <strong>borg assimilate: </strong>to orchestrate a remote server.<br><br></li>
            <li> <strong>borg assemble: </strong>to both <code>create</code> and then <code>assimilate</code>.<br><br></li>
          </ul>
          <h3 id="directory-structure">3.2. Directory structure</h3>
          <pre><code class="nohighlight">attributes/		JSON and CSON files; see <a href="index.html#attributes">Attributes</a> chapter below
  networks.coffee	your datacenter and server hierarchy
  memory.json		remembers details from cloud provider api interactions
scripts/		your Scripts; see <a href="index.html#scripts">Scripts</a> chapter below
  server/		code defining which Servers use which Scripts
  vendor/		third-party Scripts as Git submodules</code></pre>
          <h2 id="attributes">4. Attributes</h2>
          <p>Attribute files are regular <a href="http://coffeescript.org">CoffeeScript</a> files, appropriately suffixed <code>.coffee</code>, but some of them might more effectively thought of as <strong>CoffeeScript Object Notation (<a href="https://github.com/bevry/cson">CSON</a>)</strong>; a variation of <a href="http://www.json.org/">JSON</a> that allows you to, among other things, make use of <a href="http://coffeescript.org/#strings">comments</a>, <a href="http://coffeescript.org/#strings">string interpolation</a>, <a href="http://coffeescript.org/#literals">function values</a>, and conditional logic such as <a href="http://coffeescript.org/#conditionals">ternary</a> and <a href="http://coffeescript.org/#switch">switch statements</a>. These features make it a more versatile alternative to <a href="http://www.yaml.org/">YAML</a>.</p>
          <p>
            It is recommended to take advantage of these features to achieve,
            as close as possible, the overall goal of <strong><a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> (Don’t Repeat Yourself)</strong> and readability. Strive to simplify the job of an
            application maintainer who will only want to look in a single place
            to change any attribute value generated by the devops scripts.
          </p>
          <p>
            There are times when it is appropriate for an attribute to be 
            defined in more than one place. Borg knows which value to use 
            in these cases because it merges attribute files in a <a href="index.html#attribute-precedence">specific order</a> at runtime. For example, your attribute definitions will 
            override any defaults provided by third-party submodules. 
          </p>
          <p>
            The resulting attribute values are accessible to all scripts 
            from within the <code><a href="index.html#@server-object">@server</a></code> object, which is also pretty printed 
            to the debug log at the beginning of each run.
          </p>
          <h3 id="attribute-precedence">4.1. Attribute Precedence</h3>
          <p>
            Although it may seem straightforward, when making changes its 
            important to be sure any changes to attribute values won’t be 
            accidentally overridden. To help illustrate both the various 
            locations where attributes can be defined, and the order that 
            they get merged to produce the final result, we’ve assembled 
            the handy chart below, in order of precedence:
          </p>
          <table>
            <thead>
              <tr>
                <th>Name, Location, Precedence</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <p><strong id="hard-coded-attributes">1. Hard-coded Attributes</strong><br>scripts/*/*.coffee<br>scripts/*/templates/*/*.coffee<br><em>(un-overridable precedence)</em></p>
                  <p>
                    Always scrutinize whether there are values in
                    your scripts which would be more useful as attributes
                    that others can see and modify.
                  </p>
                </td>
                <td>
                  <p><strong>Purpose:</strong><br>Define local variables which remain
                    private to only one script and its templates.
                  </p>
                  <p>
                    Calculations, for example, may be based on a combination
                    of attributes defined elsewhere--such as in a
                    concatenation operation, or a hashing operation, or any
                    kind of last-minute reformatting.
                  </p>
                  <p><strong>Convention:</strong><br>Defining constants or overriding attributes within the
                    template code itself is discouraged, because its
                    difficult for other users to change these and remain
                    compatible with your upstream. The only exception is
                    when a script author is certain the resulting output is
                    unlikely to be a desired change.
                  </p>
                  <p>
                    As it happens, most scripts end up 100% hard-coded as
                    a convenience for authors in a hurry to get testing and building
                    servers. However, these aren't useful for sharing publicly
                    until all values are abstracted as overridable attributes.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p><strong id="cli-attributes">2. CLI <code>--locals=</code> Attributes</strong><br>Process arg w/ CSON value<br><em>(high precedence)</em></p>
                </td>
                <td>
                  <p><strong>Purpose:</strong><br>Define short-term instance attribute values unique to this run.</p>
                  <p><strong>Convention:</strong><br>Commonly these are one-time values that are expected to change
                    by the end of a successful run.
                  </p>
                  <p>
                    For example, if a script was expected to change the sshd listen
                    port, but aborted due to an  error before that step was reached,
                    you may want to override that setting temporarily until you are
                    done debugging and retrying.<br>(e.g., <code>ssh: port:</code>, <code>user:</code>, <code>pass:</code>, <code>key:</code>)
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p><strong id="global-attributes">3. Global Attributes</strong><br>attributes/networks.coffee<br>in the <code>global:</code> key</p>
                </td>
                <td>
                  <p><strong>Purpose:</strong><br>Define long-term instance attribute default values in the most general way possible.</p>
                  <p><strong>Convention:</strong><br>Rarely useful for global user preferences.<br>(e.g., <code>ssh: port</code> or <code>tz:</code>)</p>
                </td>
              </tr>
              <tr>
                <td>
                  <p><strong id="datacenter-attributes">4. Datacenter Attributes</strong><br>attributes/networks.coffee<br>in the <code>datacenters:</code> key</p>
                </td>
                <td>
                  <p><strong>Purpose:</strong><br>Define long-term attribute values per-datacenter,
                    per-environment, per-group, per-type, and/or per-instance.
                  </p>
                  <p><strong>Convention:</strong><br>Perhaps the most commonly used area to specify attributes
                    of any.
                  </p>
                  <p>
                    Details information specific to an instance, such as 
                    the AWS AMI, instance size, region id, zone, security group,
                    as well as information used by scripts, such as
                    memory settings, the number of instances to create in
                    each datacenter, and how they are grouped. (e.g., by environment)
                  </p>
                  <p>
                    Also provides individual scripts with hierarchical graph of
                    all defined systems in the local and extended network,
                    represented by the <code>@networks</code> variable, which is intended to be useful when dynamically
                    configuring firewall, monitoring, whitelists or other lists
                    that need to access relational information about servers other
                    than the one currently assimliating.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p><strong id="server-attributes">5. Server Attributes</strong><br>scripts/servers/*.coffee<br>within the exported function <code>assimilate: -></code></p>
                  <p>
                    Usually there is at least one of these files for each type
                    of server.
                  </p>
                </td>
                <td>
                  <p><strong>Purpose:</strong><br>Default attributes unique to servers of one type.</p>
                  <p>
                    These files also define the order that scripts are 
                    executed to complete assimilation of the machine.
                  </p>
                  <p><strong>Convention:</strong><br>For example, a set of attribute values shared by servers 
                    "web01", "web02", ... "web09"
                    could all be defined once in a file called <code>scripts/servers/web.coffee</code>
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p><strong id="script-attributes">6. Script Attributes</strong><br>scripts/*/attributes/*/*.coffee</p>
                </td>
                <td>
                  <p><strong>Purpose:</strong><br>The most appropriate place for a script author to declare
                    all script attributes and set default values which can
                    be later overridden, because it is packaged together with
                    the script when shared.
                  </p>
                  <p>
                    Also the best place to look first for a list of attributes
                    you can override if you are a new user of a third-party
                    script.
                  </p>
                  <p><strong>Convention:</strong><br>It is recommended to define defaults for all script
                    attributes so the user only has to define overriding values
                    to address unusual cases.
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p><strong id="memory-attributes">7. Memory Attributes</strong><br>attributes/memory.json<br><em>(lowest precedence)</em></p>
                  <p>Users should avoid modifying this file directly.</p>
                </td>
                <td>
                  <p><strong>Purpose:</strong><br>Data remembered by Borg after successfully interacting with 
                    the cloud provider API.
                  </p>
                  <p><strong>Convention:</strong><br>Great for things you don’t want to have to constantly insert
                    into an attribute file manually; things Borg can figure out
                    on its own, or that can only be figured out during/after a
                    run.
                  </p>
                  <p>
                    These are commonly used when automatically 
                    connecting to a newly made server, or deleting an existing 
                    server.<br>(e.g., <code>@server.instance_id</code>, <code>@server.public_ip</code>)
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
          <h3 id="cascading-attributes">4.2. Cascading Attributes</h3>
          <p>This next section applies specifically only to the <code>./attributes/networks.coffee</code> file. The goal with this file is to create an object hierarchy like: <code>datacenters: D1: groups: G1: servers: S1: instances: I1: PROPERTY: VALUE</code> where ALL-CAPS keys are names you would invent.
            This hierarchy of <strong>cascading attributes</strong> (like <a href="https://developer.mozilla.org/en-US/docs/Web/CSS">cascading style sheets</a>)
            allow the most generic definitions at the root (least <a href="http://www.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/">specificity</a>)
            to be inherited all the way down to the most specific definitions in
            the deepest leaves (most specificity; in this case, <code>I1</code>) to define the network.
          </p>
          <p>
            Observe how the keys are then inherited by instances 
            through a <a href="https://lodash.com/docs#merge"><code>_.merge()</code></a> to create the final fully-detailed 
            instance-level leaves a.k.a. the final object representing all 
            the keys attributed to a specific server instance. In order of 
            objects merged; latter overrides former.
          </p>
          <ol>
            <li><code>global.*</code></li>
            <li><code>datacenters.*.*</code> (except key: <code>groups</code>)</li>
            <li><code>datacenters.*.groups.*.*</code> (except key: <code>servers</code>)</li>
            <li><code>datacenters.*.groups.*.servers.*.*</code> (except key: <code>instances</code>)</li>
            <li><code>datacenters.*.groups.*.servers.*.instances.*.*</code></li>
          </ol>
          <h3 id="@networks-object">4.3. @networks object</h3>
          <p>A <code>networks.coffee</code> structure like:</p>
          <pre><code class="cson">global:
  ssh_port: 3562
datacenters:
  aws-ca:
    provider: 'aws'
    groups:
      'prod-myproject':
         env: 'prod'
         tld: '.myproject.tld'
         servers:
           'myapp':
             aws_size: 't2.micro'
             instances:
               '01':
                 aws_size: 'm3.xlarge'
                 secondary_ip: '1.2.3.4'
               '02':
                 secondary_ip: '1.2.3.5'</code></pre>
          <p>Will be merged into a <code>@networks</code> object, in scope from within scripts:</p>
          <pre><code class="cson">@networks.datacenters['aws-ca'].groups['prod-myproject'].servers['my-app'].instances['01'] =
  aws_size: 'm3.xlarge'
  secondary_ip: '1.2.3.4'
  env: 'prod'
  tld: '.myproject.tld'
  provider: 'aws'
  ssh_port: 3562
@networks.datacenters['aws-ca'].groups['prod-myproject'].servers['my-app'].instances['02'] =
  aws_size: 't2.micro'
  secondary_ip: '1.2.3.5'
  env: 'prod'
  tld: '.myproject.tld'
  provider: 'aws'
  ssh_port: 3562</code></pre>
          <p>
            So our script can now reach attributes for all servers, and it can
            lookup attributes by their relationship to other servers in the
            network hierarchy. (e.g., what is the secondary_ip of each my-app
            server in the same datacenter and group as the current server?)
          </p>
          <h3 id="@server-object">4.4. @server object</h3>
          <p>
            But there is also a shortcut to the current server’s attributes--
            which in the above case, if we pretend the current server is my-app02, 
            would be:
          </p>
          <pre><code class="cson">@server =
  aws_size: 't2.micro'
  secondary_ip: '1.2.3.5'
  env: 'prod'
  tld: '.myproject.tld'
  provider: 'aws'
  ssh_port: 3562</code></pre>
          <h3 id="attribute-functions">4.5. Attribute Functions</h3>
          <p>
            Notice you can define function values which are [re-]evaluated
            (as a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get">javascript getter</a>)
            at runtime every time they are referenced,
            and have access to the <code>@server</code> object within the function.
          </p>
          <p>
            For example, we can use this to 
            dynamically reference other attributes, like so:
          </p>
          <pre><code class="coffee">global:
  aws_security_groups: -> [ @server.env +’-’+ @server.type ]</code></pre>
          <p>
            We love that we can take this type of data-as-code approach, 
            and its one of the most compelling
            reasons why we prefer a javascript-based devops solution.
          </p>
          <h3 id="calculated-attributes">4.6. Calculated Attributes</h3>
          <p>
            Finally, some attributes are calculated and appended for you by 
            Borg at runtime, even though you didn’t specify them anywhere. 
            These can be based on parts of the server name 
            (e.g., <code>@server.datacenter</code>, <code>@server.type</code>, <code>@server.id</code>, <code>@server.subproject</code>, <code>@server.env</code>, <code>@server.tld</code>, <code>@server.fqdn</code>) or position in the hierarchy (e.g., <code>@server.group</code>).
          </p>
          <h2 id="resources">5. Resources</h2>
          <p>All resources are just <em><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">functions</a></em>.
            Within every script and callback--anyplace that would typically
            be considered a space the average devops scripter would occupy,
            there is a carefully crafted object provided as the reference
            of <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this">this</a></code> in Javascript or <code><a href="http://coffeescript.org/#operators">@</a></code> in CoffeeScript. It is where the <code><a href="index.html#@server-object">@server</a></code> object lives, and it is also where all resources can be found.
          </p>
          <p>Borg's resources are divided into three categories:</p>
          <ul>
            <li><strong><a href="index.html#scripts">Core Resources</a>:</strong> Resources referenced by Borg core itself;
              these are shipped with and are inseparable from Borg.
              They can generally be considered part of the <strong>Domain Specific Language (<a href="http://en.wikipedia.org/wiki/Domain-specific_language">DSL</a>)</strong> which all scripts use. There are deliberately as few as
              possible defined.<br><br>
            </li>
            <li><strong><a href="index.html#common-resources">Common Resources</a>:</strong> Resources most people expect to be there, but aren't needed by Borg core;
              these are packaged externally like a third-party resource, and installed as a Git submodule by <code>borg init</code> with all new projects. That is so anyone who might decide one of its
              resources isn't good enough for them can replace, modify, or override it.<br><br>
            </li>
            <li><strong><a href="index.html#third-party-resources">Third-Party Resources</a>:</strong> Resources which clearly wouldn't be used by every project;
              these are packaged externally and installed as <a href="http://git-scm.com/book/en/v2/Git-Tools-Submodules">
                <Git>submodules</Git></a> by <code>borg install</code> as-needed. That is so anyone can author a set of resources and share 
              with others as easily as uploading to <a href="http://github.com">Github.com</a>.
            </li>
          </ul>
          <p>Each of these are discussed further in their own separate chapters below.</p>
          <h2 id="scripts">6. Scripts</h2>
          <p>Writing scripts that define <em>how you want your servers built</em> is the whole purpose of Borg, and every other feature is only a facilitator
            toward that goal. The focus surrounds complete control and convenience--
            for a <em><a href="http://i.imgur.com/dBNfqlQ.jpg">programmer</a></em>; someone who dreams in code and works in shells every day.
          </p>
          <h3 id="defining-servers">6.1. Defining Servers</h3>
          <p>A server definition links your scripts and your <a href="index.html#datacenter-attributes">datacenter attributes</a> to
            a single <strong>Fully Qualified Domain Name (<a href="https://kb.iu.edu/d/aiuv">FQDN</a>)</strong> which you can use on the CLI,
            according to the custom naming convention below.
          </p>
          <p><strong>FQDN Format:</strong></p>
          <pre><code class="nohighlight">[<a href="index.html#fqdn-datacenter">datacenter</a>]-[<a href="index.html#fqdn-env">env</a>]-[<a href="index.html#fqdn-type">type</a>][<a href="index.html#fqdn-instance">instance</a>]-[<a href="index.html#fqdn-subproject">subproject</a>].[<a href="index.html#fqdn-tld">tld</a>]</code></pre>
          <p><strong>Definitions:</strong></p>
          <ul>
            <li><strong id="fqdn-datacenter">datacenter:</strong> Must uniquely match a key you define inside the <code>datacenters:</code> key.<br>(e.g., <code>aws-ca</code> might signify the Amazon Web Services datacenter in California)<br><br></li>
            <li><strong id="fqdn-env">env:</strong> Must match an<code>env:</code> key value you define.<br>Unique match determined by <code>datacenter</code>+<code>env</code>. <br>(e.g., <code>dev</code>, <code>stage</code>, <code>prod</code> are recommended)<br><br></li>
            <li><strong id="fqdn-type">type:</strong> Must match a key you define inside a <code>servers:</code> key.<br>Unique match determined by <code>datacenter</code>+<code>env</code>+<code>type</code>. <br>(e.g., <code>web</code> might represent horizontally scaling servers hosting your website)<br><br></li>
            <li><strong id="fqdn-instance">instance:</strong> Must match a key you define inside an <code>instances:</code> key.<br>Unique match determined by <code>datacenter</code>+<code>env</code>+<code>type</code>+<code>instance</code>. <br>(e.g., <code>01</code> might represent the first instance of many more servers like it)<br><br></li>
            <li><strong id="fqdn-subproject">subproject</strong> (Optional):
               Must match a <code>subproject:</code> key value you define anywhere below the <code>datacenters:</code> key. <br>Unique match determined by <code>datacenter</code>+<code>subproject</code>. <br>(e.g., <code>mobile</code> might represent the mobile counterpart to your desktop product,
              if the architecture were significantly different)<br><br>
            </li>
            <li><strong id="fqdn-tld">tld:</strong> (Optional):
               Must match a <code>tld:</code> key value you define anywhere below the <code>datacenters:</code> or <code>globals:</code> keys. 
              Does not have to be unique.<br>(e.g., <code>.example.org</code> might be your corporate domain)
            </li>
          </ul>
          <p>All definitions of valid values for your project happen inside the <code><a href="index.html#@networks-object">networks.coffee</a></code> file.</p>
          <p>
            The motivation is to simplify
            command-line interactions so:
          </p>
          <ol>
            <li>Commands remain simple.</li>
            <li>Complicated logic connecting everything together remains in code where it belongs.</li>
            <li>
              <p style="margin-top: 0">
                Borg can guess your intentions when naming previously undefined new servers,
                and do the right thing. For example, if all you have defined is:
              </p>
              <pre><code class="cson">datacenters:
  'aws-ca':
    tld: '.example.org'
    groups:
      'mikes-dev':
         env: 'dev'</code></pre>
              <p> and a <code>scripts/servers/web.coffee</code> server definition, Borg will only pause briefly to prompt for 
                human confirmation that you mean
                to permanently define new servers (via <code><a href="index.html#memory-attributes">memory.json</a></code>) when you specify commands like:
              </p>
              <pre><code class="nohighlight">borg create aws-ca-dev-web01.example.org
borg assimilate aws-ca-dev-web02.example.org
borg assemble aws-ca-dev-web99.example.org</code></pre>
              <p>
                ...and carry on to do exactly what you had intended. Any further
                commands referencing those FQDN will be treated exactly as any
                other pre-defined server, since they are remembered by Borg until <code>borg destroy</code> is called, or they are otherwise deleted from <code>memory.json</code>.
              </p>
            </li>
          </ol>
          <p>The basic server definition looks like this:</p>
          <pre><code class="coffee"># scripts/servers/web.coffee
module.exports =
  target: ->
    @server.type is 'web'
  assimilate: ->
    @import @cwd, 'scripts', 'web'</code></pre>
          <p>The callback function <code>target: -></code> is expected to return a <a href="http://en.wikipedia.org/wiki/Boolean_data_type">boolean</a> determining whether the current <code>@server</code> object matches this server definition. Since this is CoffeeScript,
            all statements are expressions, and the last expression of any function
            is always returned, unless otherwise specified. So that's exactly
            what this example does.
          </p>
          <p><strong style="color:#999">NOTICE:</strong> Borg will only process the first match found in <code>scripts/servers/*.coffee</code> .</p>
          <p>When a match is found, the next callback function <code>assimilate: -></code> is executed. From there it is up to you to specify
            any commands or <code>@import</code> declarations that act upon the remote server to
            complete orchestration.
          </p>
          <h3 id="importing-code">6.2. Importing Code</h3>
          <p>The import declaration takes arguments similarly to <code><a href="http://nodejs.org/api/path.html#path_path_join_path1_path2">path.join()</a></code>. The <code>@cwd</code> variable is a string provided by Borg holding the result of <code><a href="http://nodejs.org/api/process.html#process_process_cwd">process.cwd()</a></code> which is expected to be the absolute path to the root of your
            Borg project.
          </p>
          <pre><code class="coffee">  @import @cwd, 'scripts', 'vendor', 'redis', 'server'</code></pre>
          <p>This will <code><a href="http://nodejs.org/api/modules.html">require()</a></code> a script located at <code>scripts/vendor/redis/server.coffee</code>, which in this case can be expected to be provided by a third-party 
            resource named <code><a href="https://github.com/borg-scripts/redis/blob/master/server.coffee">redis</a></code>. For example, if someone had run the CLI command:
            <pre><code class="nohighlight">borg install redis</code></pre>
          </p>
          <p>...at some point in the project's history.</p>
          <p><strong style="color:#999">NOTICE:</strong> Its important to use <code>@cwd</code> because it can point to other projects if Borg is 
            being loaded as a library inside of another application.
          </p>
          <p><strong style="color:#999">NOTICE: </strong><code>@import</code> is what actually overrides the scope of <code>this</code> or <code>@</code> for the module.</p>
          <h3 id="asynchronous-flow-control">6.3. Asynchronous Flow Control</h3>
          <p>There are a lot of ways to do this, but we like <strong>Continuation-Passing Style (<a href="http://matt.might.net/articles/by-example-continuation-passing-style/">CPS</a>)</strong>. One well-known caveat to using this approach is remembering that all <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Statements">Javascript flow-control statements</a>--such as<code>if</code>, <code>else</code>, <code>try</code>, <code>catch</code>, etc.--don't normally apply.</p>
          <p>The popular solution is to select <a href="https://github.com/caolan/async">a</a> <a href="https://www.npmjs.com/package/promise">third</a>-<a href="https://www.npmjs.com/package/q">party</a> <a href="https://github.com/mikesmullin/async2">library</a> providing
            the equivalent behavior as a set of user-defined functions. Borg provides
            its own set of functions for this purpose.
          </p>
          <p>From the <strong>script developer</strong> perspective, all you need to know is <code>@then()</code>; you can think of it as an alias for <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push">Array::push()</a></code> on an array holding a list of your functions
            which will be executed in-order, all-at-once, later
            after all scripts have been processed.
          </p>
          <p>For example:</p>
          <pre><code class="coffee">@then (cb) =>
  console.log "This won't be executed until later."
  cb()</code></pre>
          <p>
            Except--instead of passing an anonymous function you've just defined--most
            of the time you are passing strings into predefined resource functions
            which do the heavy lifting, and hide the passing of callbacks behind an 
            alluringly simple syntax. Your scripts look more like this:
          </p>
          <pre><code class="coffee">@then @log "This won't be executed until later."</code></pre>
          <p>Which means, from the <strong>resource developer</strong> perspective, your resource functions are defined with a compatible signature, like this:</p>
          <pre><code class="coffee">module.exports = -> <a href="https://lodash.com/docs#assign">_.assign</a> @,
 some_resource: (names, [o]...) => (cb) =>
   # your code here
   cb()</code></pre>
          <p>
            Actually, most times you want to continue using async flows inside your
            resource. For that we have <code>@inject_flow()</code> which looks like this:
          </p>
          <pre><code class="coffee">module.exports = -> _.assign @,
 sync_clock: (names, [o]...) => @inject_flow =>
   @then <a href="index.html#@execute()">@execute</a> "sudo ntpdate -s time.nist.gov"
   # no callback hell pyramids here</code></pre>
          <p>
            There are three major reasons why we require asynchronous control flow
            to get anything done in Borg, versus a DSL that is strictly blocking,
            or simply pasting one long bash script in a string block for that matter.
          </p>
          <ol>
            <li>
              Its critical to the extensibility and dynamism of the attribute system
              that we have a two-pass system of script evaluation. The first pass
              being the one defining attributes and enqueuing functions to the <a href="http://strongloop.com/strongblog/node-js-event-loop/">giant</a> <a href="http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/">event loop</a> <a href="http://blog.carbonfive.com/2013/10/27/the-javascript-event-loop-explained/">in</a> <a href="http://stackoverflow.com/questions/19822668/what-exactly-is-a-node-js-event-loop-tick">the</a> <a href="http://chimera.labs.oreilly.com/books/1234000001808/ch03.html#chap3_id35941348">sky</a>. The second pass being the one actually performing actions on the
              remote server during orchestration--possibly re-evaluating
              attributes since the first pass, in reaction to a server response,
              or another script.<br><br>
            </li>
            <li>
              Eventually, your script could be super-parallelized; like multiple
              SSH connections to one remote server, performing complimentary
              steps at the same time. Admittedly this application
              has yet to be demonstrated.<br><br>
            </li>
            <li>
              Some resources might actually be using functions that are asynchronous
              even though your script code may not.
            </li>
          </ol>
          <p>
            There are more resources related to async that might become
            useful as you get further along. You can find them by reviewing
            examples in the common <code><a href="https://github.com/borg-scripts/resources/blob/master/index.coffee">resources</a></code> resource, and in <code><a href="https://github.com/mikesmullin/borg/blob/master/Borg.coffee">Borg.coffee</a></code>.
          </p>
          <h3 id="cryptography">6.4. Cryptography</h3>
          <p>
            You are encouraged to use the following resources
             to obfuscate strings in your project repository.
            Its a smart thing to do with sensitive information,
            which would then be relatively safe even if your
            devops scripts were accidentally leaked.
          </p>
          <pre><code class="coffee">@then @die @encrypt "example utf8 string"
decrypted_string = @decrypt "example base64 string"</code></pre>
          <p>The cipher is OpenSSL <a href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES-256-CBC</a>. The key is derived
            from a file in your project root named <code>./secret</code> which typically contains a random 512-byte base64 string
            generated by <code>borg init</code> when your project is first initialized. This file
            should never be shared in the same way the project
            source is, or the encryption is useless.
          </p>
          <p>
            Likewise, you can also encrypt binary data files
            your scripts are expected to upload to remote servers,
            such as individualized software licenses, using the Borg CLI:
          </p>
          <pre><code class="nohighlight">borg encrypt # see help</code></pre>
          <p>and then passing the<code>decrypt: true</code> option when using resources like <code>@upload()</code> to transmit the local file to its remote location on the server.</p>
          <h3 id="console-debugging">6.5. Console Debugging</h3>
          <p>
            Some people prefer to temporarily sprinkle log
            statements throughout their code and then run it to see
            what order they appear on the console log:
          </p>
          <pre><code class="coffee">@then @log "Reaching here? Let's see what variable x is: #{x}."
console.log() # the non-async way</code></pre>
          <p>
            Sometimes also aborting just after the point of interest,
            to prevent going too far or taking a long time between
            iterations:
          </p>
          <pre><code class="coffee">@then @die "I am debugging. This is only temporary."
process.exit 1 # the non-async way</code></pre>
          <p>Its a valid strategy and occasionally faster than other methods.</p>
          <h3 id="interactive-debugging">6.6. Interactive Debugging</h3>
          <p>You can execute any <code>borg</code> CLI command with <code>debug</code> as the first parameter to launch a <a href="http://www.google.com/chrome/">Chrome</a> browser using <a href="https://developer.chrome.com/devtools">DevTools</a> . This will let you set and catch <code>debugger</code> breakpoints, pause, step over,
            step into, step out, continue, and inspect stack, backtrace, 
            variables, etc. From there the experience is very similar to any other 
            Javascript, Node.JS, or CoffeeScript application.
          </p>
          <pre><code class="nohighlight">borg debug assimilate aws-ca-dev-web01.example.org</code></pre>
          <h3 id="test-provisioning">6.7. Test Provisioning</h3>
          <p>There is a <code>test</code> mode you can enter with the Borg CLI, which keeps
            a separate list of servers provisioned in the cloud. This way, while
            testing, servers you create are still created at your cloud provider--as
            not to differ from the production environment hardware--but they
            have a "test-" prefix to set them apart.
          </p>
          <p>For example:</p>
          <pre><code class="nohighlight">borg test assimilate aws-ca-dev-web01.example.org</code></pre>
          <p>
            While in test mode, you can perform bulk operations such as
            provisioning every server from your dev environment to see
            if recent script modifications broke anything.
          </p>
          <pre><code class="nohighlight">borg test assimilate aws-ca-dev</code></pre>
          <p>The fourth argument is matching on regular expression.</p>
          <p>For more information, see:</p>
          <pre><code class="nohighlight">borg help test</code></pre>
          <h3 id="integration-testing">6.8. Integration Testing</h3>
          <p><strong style="color:#999">NOTICE:</strong> This feature is currently in development.</p>
          <p>A feature using <a href="http://mochajs.org/">Mocha</a> is planned to run tests in CoffeeScript that are able to
            execute commands for testing purposes.
            For example, it might be useful if, after a new machine is cooked,
            Borg were able to automatically connect to one or more of its peer servers
            as defined in <code>network.coffee</code> and perform a command <code>nc -vz s &lt;public_ip&gt; &lt;some_port&gt;</code> in order to determine if important ports were open to them.
          </p>
          <p>
            This type of test would essentially be attempting to reproduce, from the
            end-user's perspective, whether or not the assimilation resulted
            in a working service. You can imagine the output would look something
            like:
          </p>
          <pre><code class="nohighlight">user@host: ~/project$ borg checkup aws-ca-dev-web01.example.org
test: web:<br><span style="color:lime">&#x2714;</span> web01 was able to connect to redis01 on tcp/6379<br><span style="color:red">&#x2717;</span> web02 was NOT able to connect to redis01 on tcp/6379
   <span style="color:red">nc: getaddrinfo: Name or service not known</span> 
 
2 test(s) run in 204ms. 1 passed, 1 failed.</code></pre>
          <h3 id="jobs">6.9. Jobs</h3>
          <p><strong style="color:#999">NOTICE:</strong> This feature is currently in development.</p>
          <p>
            Jobs are essentially partial scripts, which are invoked from 
            the command-line and perform specific
            actions of a periodic nature on a remote server.
            For example, it could
            restart a service, or perform a software deployment, or
            truncate logs, or any other routine or mundane task.
          </p>
          <p>Jobs are located in <code>scripts/jobs/*.coffee</code>, which have the benefit of being distributed with
            and utilizing all the accompanying resources. For example, tasks
            related to the maintenance of a Percona server, such as peforming
            a backup snapshot, could be distributed along with the<code><a href="https://github.com/borg-scripts/percona">percona</a></code> resource which installs the service.
          </p>
          <h2 id="common-resources">7. Common Resources</h2>
          <p>There is a third-party submodule that comes with every new <code>borg init</code> and that is the borg-scripts/resources repository. It holds the 
            most basic functions you would expect to use in any project.
          </p>
          <p>
            Notice that these are kept very light-weight. The list is 
            short but they do a lot by themselves. The preference though is 
            very biased toward bash scripting muscle. In the author’s 
            opinion, it makes more sense for three reasons:
          </p>
          <ol>
            <li>
              Someone not familiar with borg but who is familiar with bash 
              could more readily read / QA a borg script and copy/paste from 
              it to achieve the same outcome.
            </li>
            <li>
              Typically the process for making a new script involves first 
              making the server manually, which results in a bash history 
              which is used as a template for the devops script. It saves 
              time to be able to simply paste the bash history into Borg, 
              rather than have to translate it to yet another domain 
              specific language (DSL), and back out to bash when 
              debugging/troubleshooting.
            </li>
            <li>
              Well-written bash script tends to be terse and powerful, 
              resulting in far less boilerplate and complexity than the 
              equivalent heavy resource.
            </li>
            <p>Though expecting to support others, most resources favor <a href="http://www.ubuntu.com/download/server">Ubuntu Server</a> when forced to choose, as the time of writing.</p>
          </ol>
          <p><strong style="color:#999">ADVERTISEMENT:</strong> Accepting pull requests to support other <a href="http://www.serverwatch.com/columns/article.php/3900711/The-Top-10-Linux-Server-Distributions.htm">Server Operating Systems</a>.</p>
          <h3 id="@execute()">7.1. @execute()</h3>
          <p>
            Execute shell command(s) on remote host. Perhaps the most used of
            all resources.
          </p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @execute "echo --no-rdoc --no-ri | sudo tee /etc/gemrc"</code></pre>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>sudo:</strong> (Optional): If <code>true</code>, command will be prefixed with the string <code>sudo</code>. If <code>false</code>, no prefix is added. If typeof string, prefix will be <code>sudo -u#{string}</code>. This option can be useful when you want to sudo
              a resource that depends on other resources. In that
              case, they all support this option, and forward the
              option recursively. But sometimes when piping is
              involved, its easier to just define sudo in the
              command yourself and omit this option.
              Default is <code>false</code>.<br><br>
            </li>
            <li><strong>su:</strong> (Optional): Must a be a string containing a username. Will prefix
              the command with <code>sudo su - #{string}</code>. Alternatively you can also just prefix the command
              yourself. Default is <code>null</code> or no prefix. Mutually exclusive of <code>sudo:</code>.<br><br>
            </li>
            <li><strong>retry</strong> (Optional): Integer representing number of times to retry the command
              if it fails, before giving up and <code>@die()</code>ing. Default is <code>0</code>.<br><br>
            </li>
            <li><strong>ignore_errors:</strong> (Optional): Boolean representing whether to <code>@die()</code> if failure is encountered. Default is <code>true</code>.<br><br></li>
            <li><strong>expect:</strong> (Optional): A kind of assertion for testing the result of the command.
              If integer, must match the exit code. If RegExp, must match the combined
              stdout and stderr output. If string, must case-sensitive string match 
              the combined output. Failed matches will subsequently <code>@die()</code>, while matches continue.<br><br>
            </li>
            <li><strong>test:</strong> (Optional): A callback Function of signature <code>({code, out}) =></code> where <code>code</code> is the exit code, and <code>out</code> is the combined stdout and stderr output string.
              Can be used as an alternative to <code>expect:</code> to define your own assertions, or to parse data
              from the output, or to transform
              the <code>@execute()</code> resource into a kind of asynchronous <code>if</code> statement alternative, as in the following example:
              <pre><code class="coffee">@then @execute "date", test: ({out}) =>
  if out.match /Sep/
    @then @log "Yay, a birthday month!"
  else
    @then @log "Boo."</code></pre><strong style="color:#999">NOTICE:</strong><code>@execute()</code>internally wraps <code>@inject_flow()</code> before calling our <code>test:</code> callback function.<br><br>
            </li>
          </ul>
          <h3 id="@package-update()">7.2. @package_update()</h3>
          <p>
            Updates the local cached copy of OS package manager repository.
            Usually done prior to <code><a href="index.html#@install()">@install()</a></code> especially if a new third-party repository was just added to the list.
          </p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @package_update()</code></pre>
          <p>
            This resource can be a little awkward because you have to remember to
            use the parenthesis, as it takes no arguments.
          </p>
          <p><strong style="color:#999">NOTICE:</strong> In the future this resource will check if it succeeded recently
            or if the repo list changed since last run, and skip if its not
            productive to run again.
          </p>
          <h3 id="@install()">7.3. @install()</h3>
          <p>Install new software package(s) via the OS package manager.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @install "git build-essential unzip"</code></pre>
          <p>
            This resource only takes one argument, which is a space-delimited
            list of the packages to install. It also assumes <code>sudo: true</code> when calling <code><a href="index.html#@execute()">@execute()</a></code>.
          </p>
          <p><strong style="color:#999">PROTIP:</strong> Almost all the common resources follow a conventional function
            signature where the first argument represents a list of things,
            and the second argument is an object containing optional key
            values.
            That list argument can be a string, or it can also be an array
            of strings, which may come in handy if your items naturally 
            contain spaces that you don't intend to be parsed as delimiters.
          </p>
          <h3 id="@uninstall()">7.4. @uninstall()</h3>
          <p>The opposite of <code><a href="index.html#@install()">@install()</a></code>.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @uninstall "whoopsie samba"</code></pre>
          <p>
            This resource only takes one argument, which is a space-delimited
            list of the packages to install. It also assumes <code>sudo: true</code> when calling <code><a href="index.html#@execute()">@execute()</a></code>.
          </p>
          <h3 id="@directory()">7.5. @directory()</h3>
          <p>
            Make one or more directories on the remote server, and/or
            set their ownership and permissions.
          </p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @directory "/var/www/example.org",
  recursive: true
  owner: 'www-data'
  group: 'www-data'
  mode: '0755'
  sudo: true</code></pre>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>recursive:</strong> (Optional): Boolean indicating whether to create parent
              directories if they do not already exist.<br><br>
            </li>
            <li>Inherits all options from <code><a href="index.html#@chown()">@chown()</a></code>, except <code>recursive:</code>.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@chmod()">@chmod()</a></code>, except <code>recursive:</code>.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@chown()">7.6. @chown()</h3>
          <p>Set ownership of a file or directory.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @chown "/etc/nginx",
  owner: 'nginx'
  group: 'nginx'
  recursive: true
  sudo: true</code></pre>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>owner:</strong> (Required): String owner name.<br><br></li>
            <li><strong>group:</strong> (Optional): String group name.<br><br></li>
            <li><strong>recursive:</strong> (Optional): Boolean indicating whether to modify ownership
              of child directories and files, if they exist.<br><br>
            </li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@chmod()">7.7. @chmod()</h3>
          <p>Set permission mode of a file or directory.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @chmod "/etc/nginx",
  mode: '0755'
  recursive: true
  sudo: true</code></pre>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>mode:</strong> (Required): String <a href="http://linux.die.net/man/1/chmod">MODE</a>.<br><br></li>
            <li><strong>recursive:</strong> (Optional): Boolean indicating whether to modify ownership
              of child directories and files, if they exist.<br><br>
            </li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@template()">7.8. @template()</h3>
          <p>
            Create or replace a text file on the remote machine
            with the result of a local template.
          </p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @template [__dirname, 'templates', 'default', 'logrotate'],
  to: "/etc/logrotate.d/example_org.conf"
  owner: 'root'
  group: 'root'
  mode: '0600'
  sudo: true
  <span id="template-example-1">variables:</span> 
    paths:
      '/srv/*/current/log/*.log':
        weekly: true
        rotate: 4
        missingok: true
        copytruncate: true
        create: "555 #{@server.web_user} www-data"
        compress: true</code></pre>
          <p>The first argument in this example is a <code><a href="http://nodejs.org/api/path.html#path_path_join_path1_path2">path.join()</a></code> style location
            of the local template, while <code><a href="http://nodejs.org/docs/latest/api/globals.html#globals_dirname">__dirname</a></code> evaluates to the absolute path of the current script. Its easiest to reference your
            template files relative to the script because they are usually distributed together,
            but you can also use <code>@cwd</code>.
          </p>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>to:</strong> (Required): String absolute path of the remote file.<br><br></li>
            <li><strong>variables:</strong> (Optional): Object containing hierarchy of keys that become
              <the>context of </the><code>this</code>or <code>@</code>inside the template. (e.g., <code>variables: pet_name: 'trudy'</code> is accessed as <code>@pet_name</code> within the scope of the template tags.<br><br><strong style="color:#999">PROTIP:</strong> The <code><a href="index.html#@server-object">@server</a></code> and <code><a href="index.html#@networks-object">@networks</a></code> objects are always in template scope.<br><br>
            </li>
            <li><strong>content:</strong> (Optional): String representing entire file contents.
              When specified, <code>to:</code> is omitted, and the path to the remote file is specified
              as the first argument to the resource, instead.<br><br><strong style="color:#999">PROTIP:</strong> Sometimes, instead of creating a separate template file,
              especially if the template is very short, mostly variables,
              or requires complex logic to create, its easier to pass
              them inline as a string to this option.<br><br><strong>Example:</strong>
              <pre><code class="coffee">@then @template "/etc/logrotate.d/example_org.conf",
  <span id="template-example-2">content</span>: """
  /srv/*/current/log/*.log:
    weekly
    rotate 4
    missingok
    copytruncate
    create 555 #{@server.web_user} www-data
    compress
  """
  owner: 'root'
  group: 'root'
  mode: '0600'
  sudo: true</code></pre><strong style="color:#999">PROTIP:</strong> You can <code><a href="index.html#cryptography">@decrypt()</a></code> part or all of <code>content:</code> to secure sensitive info.<br><br>
            </li>
            <li>Inherits all options recursively from <code><a href="index.html#@upload()">@upload()</a></code>.</li>
          </ul>
          <p><strong>Template Markup:</strong></p>
          <p>The template markup is most like <strong>Extended Ruby (<a href="http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action">ERB</a>)</strong> adjusted for CoffeeScript. For example, the companion template for the <code><a href="index.html#template-example-1">variables:</a></code> passed in the first example given above could be:</p>
          <pre><code class="erb"><% for key, o of @paths: %>
<%=key%> {
<% for k, v of o: %>
  <%=k%><%=if v is true then '' else ' '+v%>
<% end %>
}
<% end %></code></pre>
          <p>
            ...and it would have produced the same string as passed to the second example
             above's <code><a href="index.html#template-example-2">content:</a></code> option. Have a look at the <a href="https://github.com/borg-scripts/resources/blob/master/template_renderer.coffee">parser implementation</a> for details. You can also find examples while perusing various <a href="index.html#third-party-resources">third-party resource</a> templates.
          </p>
          <p>Template files are located within the <code>scripts/*/templates/default/*.coffee</code> path nearest to where your script is located.
            All template files should have a <code>.coffee</code> extension, even though it isn't required to be suffixed in the first argument.
          </p>
          <p><strong style="color:#999">PROTIP:</strong> Borg includes <a href="http://sugarjs.com/api">Sugar.js</a> globally for both templates and scripts.</p>
          <h3 id="@upload()">7.9. @upload()</h3>
          <p>
            Upload a local file to the remote server. Overrides existing files
            unless checksums match.
          </p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">for file in ['example.org.key', 'example.org.crt', 'godaddy_chain.crt']
  @then @upload [ __dirname, 'files', 'default', file ],
    to: '/etc/ssl/'+file
    decrypt: not file.match /godaddy/
    owner: 'root'
    group: 'root'
    mode: '0400'
    sudo: true</code></pre>
          <p>The first argument is the local file to upload, provided similarly to <a href="index.html#@template()">@template()</a>.</p>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>to:</strong> (Required): String absolute path of the remote file.<br><br></li>
            <li><strong>decrypt:</strong> (Optional): Boolean indicating whether to <code>@decrypt()</code>the local file prior to transmission.
              (e.g., if <code><a href="index.html#cryptography">borg encrypt</a></code> was used to secure the file on disk)<br><br>
            </li>
            <li>Inherits all options from <code><a href="index.html#@chown()">@chown()</a></code>, except <code>recursive:</code>.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@chmod()">@chmod()</a></code>, except <code>recursive:</code>.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@download()">7.10. @download()</h3>
          <p>Cause the remote server to download a file from the <a href="http://www.google.com/about/datacenters/gallery/#/all">Internet</a>.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @download 'http://download.redis.io/releases/redis-2.8.19.tar.gz',
  checksum: '29bb08abfc3d392b2f0c3e7f48ec46dd09ab1023f9a5575fc2a93546f4ca5145'
  to: '/tmp/redis.tar.gz'
  mode: '0400'</code></pre>
          <p>The first argument is a string representing the remote file url to download.</p>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>to:</strong> (Required): String absolute path of the remote file.<br><br></li>
            <li><strong>checksum:</strong> (Optional): String holding the <code><a href="http://linux.die.net/man/1/sha256sum">sha256sum</a></code> which must match.<br>If specified, a non-match will result in <code>@die()</code>.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@chown()">@chown()</a></code>, except <code>recursive:</code>.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@chmod()">@chmod()</a></code>, except <code>recursive:</code>.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@link()">7.11. @link()</h3>
          <p>Create a symlink on the remote host.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">current_dir = '/var/www/example.org/current'
 
# symlink logs for convenience
@then @link "#{current_dir}/logs",
  target: '/var/log/example.org'
  sudo: true</code></pre>
          <p>The first argument is a string representing the real file or directory which will be linked.</p>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>target:</strong> (Required): String path to output link to.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@append-line-to-file()">7.12. @append_line_to_file()</h3>
          <p>Append a new line to an existing file, only if a matching RegExp doesn't already exist.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @append_line_to_file '/etc/apache2/apache2.conf',
  unless_find: '^ServerName 127.0.0.1' # avoids commented lines
  append: 'ServerName 127.0.0.1'</code></pre>
          <p>The first argument is a string representing the absolute file path on the remote host.</p>
          <p>
            This resource is handy when you're not confident you should replace
            the entire remote file (e.g., The Apache configuration template would vary significantly by
            release version, OS distro, and even distro version.)
          </p>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>unless_find:</strong> (Required): String regular expression formatted for <a href="http://linux.die.net/man/1/grep">grep</a>.<br><br></li>
            <li><strong>append:</strong> (Required): String to append.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@replace-line-in-file()">7.13. @replace_line_in_file()</h3>
          <p>Replace a line in an existing file, only if and where the first matching RegExp is found.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @replace_line_in_file '/etc/redis/redis.conf',
  find: '^bind [\w:.]+$'
  replace: 'bind 0.0.0.0'</code></pre>
          <p>The first argument is a string representing the absolute file path on the remote host.</p>
          <p>
            This resource is handy when you don't feel like templating the entire remote file
            for a simple change, or when non-action is acceptable if a match isn't found.
          </p>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>find:</strong> (Required): String regular expression formatted for <a href="http://linux.die.net/man/1/sed">sed</a>.<br><br></li>
            <li><strong>replace:</strong> (Required): String serving as the replacement.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@user()">7.14. @user()</h3>
          <p>Create a new user, if the username doesn't exist already.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @user 'regal',
  comment:    'Reggie Almus'
  password:   '$1$UPmdzNfV$k6U33XIPlWuE1z1cPJ/QQ/'
  group_name: 'developers'
  groups:   [ 'regal', 'sudo' ]
  ssh_keys: [ 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCt2pTY9+k/PwmGuEwmXOQMrq/fnHHJ+LIexmB172hlf1ytMaXPy4lcNPFX3j7Q5lI8z+L3SFl66Lcakc6i/BIQR8Jr7Vz2UmtaeF21sQKHS1Bw5he4l9F/EkikgIetVGU8+X7xaBkV4+2v6ELE1UMVot0YI7DurVj3aLRpsCYyihj9ju/J6Few4ffxP3ef4FsM89Tsnj0SYi8lnjEfKBbLm5ydu9oJH6vG6AHGWjVstznrMwvzZiKiX8gOJmZSCLNL1SAEYrnuGx3rWa5BzdWuLcvrbhJk2Gge4T4iUItt9VsqJ/vFbV95JwYjLLr6nTC3i7Exd7SOn+GKYJVldY/H' ]
  sudo:        true</code></pre>
          <p>The first argument is a string representing the new username.</p>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>password:</strong> (Required): String password, as encrypted by the command:
              <pre><code class="nohighlight"><a href="http://linux.die.net/man/1/sslpasswd">openssl passwd</a> -1 "theplaintextpassword"</code></pre>
            </li>
            <li><strong>comment:</strong> (Optional): String usually used to indicate full name in proper case.<br><br></li>
            <li><strong>group_name:</strong> (Optional): String representing the user's default/primary group.<br><br></li>
            <li><strong>groups:</strong> (Optional): Array of strings representing the user's additional groups.<br><br></li>
            <li><strong>ssh_keys:</strong> (Optional): Array of strings, each containing the typical one-line
              contents of any OpenSSH <a href="http://www.ece.uci.edu/~chou/ssh-key.html">public key</a> file(s) to be installed in the user's <code>~/.ssh/</code> directory.<br><br>
            </li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@group()">7.15. @group()</h3>
          <p>Create a new group, if the group name doesn't exist already.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @group 'developers', sudo: true</code></pre>
          <p>The first argument is a string representing the new group name.</p>
          <p><strong>Options:</strong></p>
          <ul>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <h3 id="@deploy()">7.16. @deploy()</h3>
          <p>Download a version control repository within a <a href="http://capistranorb.com/">Capistrano</a>-style<a href="http://capistranorb.com/documentation/getting-started/structure/">
               
              directory structure</a>.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @deploy 'borg-docs',
  deploy_to: '/srv/borg-docs-mirror'
  git:
    repo: 'git@github.com:mikesmullin/borg-docs.git'
    branch: 'master'
    deployKey: @decrypt 'NOuYeXFv6YS022wwlcUps6WX31QZeLmHTb72hNdj6XnKPpeSaxDm4ec+Mi6Sl2C4MqHuWIyxS5DMydOd118InDyhbmkv7L1Xeon719QsakI6NKbWm1jLahHwX/RfWgVWwVyX8ARVEqjQOa3rjST/LUpnNWukbjXvOxRV6tbwDhrZeKT/W0vCxBeifxT6zVEGDkE9hTEt8kb1l3eFjJFirVvdD1RBVJfqa/UL4OtndJMG9bV/7VVnaLwyRjH0EI6Z/Wbahf7VAtyn3LdtMcBQHmkYgZc8H8S56UrbdAa+GQYnvDSIC2kYEZBcEtrvkxFo3+Jx6G+zLRGfqgTg026cwJYOuGIMWCOxqS+h+pngRSYP6JB2zH5KTZ30QUI3srWQj08rQMpqY/0XJJKDV69bJL3/0oRP90qcYKuhxnTsAcG4CI3EbgT/it2DVzIpNPlOXDq+0OyDbWP9oZdefLw4+GloDD/By4aZMc1sI+ZsShay/aV6+LH85xAjNXehjg18Ik2mTyGyHvXUtltf/ELBsik5DJx1Iepz6BHEWdruuB9W9a/ycS9TnSkyGYKvyHFc9lusJEzNYFeSek1Ae0J7jPrMlojeyz/VFxvUZLpT5Ju/38XRE2t94bdQoYroNHISvHK4kNbWDNjy8fMa4zGvx/Yd5wjQlCfk4FJotkRPNkarazrFrPJ+dENeFJfRRa2B1KXbBtf/olVJPBGyiImjiwr2pVB/2jJpjEI6/zyp+wNDLSFHwXvwi54+vnQL/mBUTHZuTn9WS7sa+gjdV0LjcUSWsxahGIDpmc+WvAUPGUD89f6lQJMIx37Lp9Ij9kpl3SLrrBdJbrzjr0bgF82bq6gki4cBqNMswC1Ol/JzRmwg4jGr3wjF0kZV4/4U4Ok12qbOsyKhMOknDljbrBQb+6rZZC9CiB1np4g1BUd5WAq64Q5NpwprjThWipPOK5kxV4Rart1GyEkuOFKvnFX3jPLxHwHMGiwsaeI4qY9xK1F+TBoouP2IWi4Qv3asnWaUzo08GEKvtAJBmj8dREVnPvPwcBBgO9Q01y9nqaGdY34XJkdCdPy9iFOP4PJ6ol44U8FyeMc7gKPWIS1epLtPmmagT02Ii5AucZOMUVYth7+UC6q2lW2mEi3xIQklvxTmST/jpJ1ZILzPvK5ksq2P3nnFbahj4ylQSd8EZ8tIR7wA62cp8KlRSWAbU0Fc4IYEJCv3kvaupihPBFdW9pSQrAMAudb7OdTtWr2UnT5AjtfVNeKobRYYkNaY278Y16oR+PIRGsQmdFruugCEArk3MOGs6VqG4/Eb3yfzqOm2Ht63/SjWdpfu6NjrotL0H3yIg6oUNMijtmAlqjMmTJyzSEwlkX+9N+GkGpjAel+4O7ff06Cts7PqVBRKJTmv8b8JPTyh+JlqVZs7MwtGAwN2LoE+aygAXTeEexR+pNOUbJtGZm4nO+KSlxQn6J47yz+W3EGRHyEWBupnT+3lkQ9qka/hJIDzr37RvsP9haBLwtjId/dmnJRu1r58WBl/gfZgftjNGtlG2bhLzWSfbAv6cA7+nU02pozfQBIhXkKivkcDJD23yZ92cjbF31VHh1GKxv3rSQbXIBkywn5sv5jpoppQTDVoBADag+RAuVHGskjWyk/eezAdP4ndBixB98NDVKG64ICA4F7O7BM+91bcFdjDQKHS0OVXvERNKkJTBLkkDXNPnmxS4incVMAMCDyweEZQlR+FJkMsVCOQxXP4YADEnBDXe3Sx4XnGxRUKal/dLHJiQcxZ6XRgTJMbVKEFYrpVa9EqTVRv8wcxJNMOfZW1Ne6h3SQOljkcz2tLL2lDbqQEk/aGHGWQxQ7EZPiaFNEKhtz8uMiyBQ0gw9ihV8vKTebhbObXt07yZtAyGD580Vjx3syzSYx0FT77hWe4ViHmNxJSS3QMp//nJOZFC4yEgb178/hg47rS+u6lCn0VXE1ZMY00N6idMLu7BNruwBv7kIju7khJeeMsWkKYBm/CtOqRbZSHp+S10gdk0e/9ktqiZPE9k+3rNf+cf4w0DGnMRM/HfpEwUB/lXQfVV/pUqE/FqGe/gcFtRVmQ7Bkm+keiE8uihRpn2KP7SyJuW7uBrHXXDQ6rrfkr1bVBCy90sLFIzwQt/aPp3aowt0yls2Lj71yHrq8rUOOm8W7mWMIG5rtysDYPR5okr8Q+BXLnF+lO7Pskn4msBMenx64COR9v2kp9CZ/aQ66yIPIr4GS4zS3niKklUQUFYm6lDRq/mo1xFNwZJoU4tGfvkH5zeIJUSc+jWrKDwlNLIO5IYgFd3ADtbuvH22S9QF08FiDYg3m4BCx+oY6IHj8/6fmrgiCnPgxecEdhGFrBxQLVdcBdReqrupb/g8HhoeKeOl7XrWmQQDx74T2Q8TDOndAZ0udONsHECb1aHpDTGh7JFJOZKPLwOn8XtgxA+14rlyXNenOugE+gsCd/RS5k2zAil14f2TMrKcuctOCaXSVdut9YrTzMZk2i+M3OcAGvchblbGPbfOOzhJg4omT/4kKd/utSdIBVjGVgQvjjaD0cRGsNAn1sbOZBLhAIT+3Bfeympp5N/i6meCxaSBigWvB5Xey1+VyDZJPG8zXN5NPzlxva0+Bm8SJtP9LeJesO+ocBIqx3MHSCWGmeLjhFg/vS5qO191XFtulAOW9IvSKk7yy0Mk+adEsf915Hz2aGjm6ZFXjP0gJ6ZOkOugY+b2XzYt4KFqtzyCEPJEA5bP+pv/qZzeb7k4ViPsYf0u9YMkVRoc5q65Bfw8ubAr6PvFLX6ccYO6c9uIVHtL5qJRu8cmXvYute/dMPD1AFN7unzw=='
  keep_releases: 3
  owner: 'nodejs'
  group: 'developer'</code></pre>
          <p>The first argument should be an alias of the repo. It is planned to be used in a later version.</p>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>deploy_to:</strong> (Required): String representing remote path to the directory to download into.<br><br></li>
            <li><strong>git:</strong> (Required): Object containing this structure:
              <ul>
                <li><strong>repo:</strong> (Required): String URI to the hosted Git repository.<br><br></li>
                <li><strong>branch:</strong> (Required): String branch, tag, or git ref.<br><br></li>
                <li><strong>deployKey:</strong> (Optional): The OpenSSH <a href="http://www.ece.uci.edu/~chou/ssh-key.html">private key</a>, if one is required to gain read access to the hosted
                  repository.<br><br><strong style="color:#999">PROTIP:</strong> It is recommended to use <code><a href="index.html#cryptography">@decrypt()</a></code> to secure private keys, as their contents could grant access
                  to everywhere the corresponding public key was installed, if 
                  leaked.
                </li>
              </ul>
            </li>
            <li><strong>keep_releases:</strong> (Optional): Integer how many previous <code>./releases/*/</code> directories to keep around before deleting them to save disk space.
              Default is <code>3</code>.<br><br>
            </li>
            <li>Inherits all options from <code><a href="index.html#@chown()">@chown()</a></code>, except <code>recursive:</code>.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@chmod()">@chmod()</a></code>, except <code>recursive:</code>.<br><br></li>
            <li>Inherits all options from <code><a href="index.html#@execute()">@execute()</a></code>.</li>
          </ul>
          <p>Right now only <a href="http://git-scm.com/">Git</a> via <a href="https://training.github.com/kit/downloads/github-git-cheat-sheet.pdf">CLI</a> is supported.</p>
          <p><strong style="color:#999">ADVERTISEMENT:</strong> Accepting pull requests to support other <strong>Source Code Managers (<a href="http://en.wikipedia.org/wiki/List_of_revision_control_software">SCMs</a>).</strong></p>
          <h3 id="@reboot()">7.17. @reboot()</h3>
          <p>Command the remote server to <code><a href="http://linux.die.net/man/8/reboot">reboot</a></code> itself.</p>
          <p><strong>Example:</strong></p>
          <pre><code class="coffee">@then @reboot wait: 3 # min</code></pre>
          <p>
            Useful when the remote Linux kernel was upgraded, or a hardware driver
            was installed that depends on a different kernel version, or if you
            want to test that your configuration survives a restart.
          </p>
          <p><strong>Options:</strong></p>
          <ul>
            <li><strong>wait:</strong> (Optional): Minutes to wait for the server to finish rebooting
              before attempting to reconnect and resume the SSH session where
              the script left off. Default is <code>1</code>.<br><br><strong style="color:#999">PROTIP:</strong> Its important to tweak this for slow servers because Borg's <code>@ssh</code> client will only retry 3 times before giving up and calling <code>@die()</code> in the event it takes longer than expected.<br><br><strong style="color:#999">NOTICE:</strong> Borg will always call <code>@die()</code> in the event it gets stuck or confused. This is a safety convention
              you should try to observe in your scripts, as well.
              During mass assimilation, you want failures to be obvious.
              Its hard to recover from what might otherwise be a hang, or 
              skipping of some commands. In most cases, its much easier to embrace
              the <a href="http://searchservervirtualization.techtarget.com/feature/Setting-up-VMs-to-fail-When-a-disposable-VM-makes-financial-sense">disposable hardware</a> strategy of just destroying
              the remote machine and trying again later.
            </li>
          </ul>
          <h2 id="third-party-resources">8. Third-Party Resources</h2>
          <pre><code>borg install
borg update</code></pre>
          <p>The documentation for resources can be found in their individual repos.</p>
          <p>For a listing of available repos, see:<br><a href="https://github.com/borg-scripts">https://github.com/borg-scripts</a></p>
          <h2 id="contributing">9. Contributing</h2>
          <p>Your contributions are welcome via Github.com.</p>
          <h3 id="issuing-a-pull-request">9.1. Issuing a Pull Request</h3>
          <ol>
            <li>
              <p>Fork and clone</p>
              <ul>
                <li>Main sources:<br><a href="https://github.com/mikesmullin/borg">https://github.com/mikesmullin/borg</a><br><br></li>
                <li>Documentation:<br><a href="https://github.com/mikesmullin/borg-docs">https://github.com/mikesmullin/borg-docs</a></li>
              </ul>
            </li>
            <li>Edit to heart&rsquo;s content</li>
            <li>
              <p>Publish to your fork:</p>
              <pre><code>git commit && git push</code></pre>
            </li>
            <li>Issue pull request to official repo, and we will review and approve or provide feedback.</li>
          </ol>
        </div>
      </article>
      <aside>
        <div class="wrapper">
          <div class="content">
            <h3>Chapters</h3>
            <ol>
              <li><a href="index.html#getting-started">Getting Started</a>
                <ul>
                  <li><a href="index.html#install-node.js">Install Node.JS</a></li>
                  <li><a href="index.html#install-borg">Install Borg</a></li>
                  <li><a href="index.html#generate-a-new-project">Generate a New Project</a></li>
                  <li><a href="index.html#explore-help">Explore Help</a></li>
                </ul>
              </li>
              <li><a href="index.html#cloud-integration">Cloud Integration</a>
                <ul>
                  <li><a href="index.html#amazon-web-services">Amazon Web Services</a></li>
                </ul>
              </li>
              <li><a href="index.html#introduction">Introduction</a>
                <ul>
                  <li><a href="index.html#vernacular">Vernacular</a></li>
                  <li><a href="index.html#directory-structure">Directory structure</a></li>
                </ul>
              </li>
              <li><a href="index.html#attributes">Attributes</a>
                <ul>
                  <li><a href="index.html#attribute-precedence">Attribute Precedence</a></li>
                  <li><a href="index.html#cascading-attributes">Cascading Attributes</a></li>
                  <li><a href="index.html#@networks-object">@networks object</a></li>
                  <li><a href="index.html#@server-object">@server object</a></li>
                  <li><a href="index.html#attribute-functions">Attribute Functions</a></li>
                  <li><a href="index.html#calculated-attributes">Calculated Attributes</a></li>
                </ul>
              </li>
              <li><a href="index.html#resources">Resources</a>
                <ul>
                </ul>
              </li>
              <li><a href="index.html#scripts">Scripts</a>
                <ul>
                  <li><a href="index.html#defining-servers">Defining Servers</a></li>
                  <li><a href="index.html#importing-code">Importing Code</a></li>
                  <li><a href="index.html#asynchronous-flow-control">Asynchronous Flow Control</a></li>
                  <li><a href="index.html#cryptography">Cryptography</a></li>
                  <li><a href="index.html#console-debugging">Console Debugging</a></li>
                  <li><a href="index.html#interactive-debugging">Interactive Debugging</a></li>
                  <li><a href="index.html#test-provisioning">Test Provisioning</a></li>
                  <li><a href="index.html#integration-testing">Integration Testing</a></li>
                  <li><a href="index.html#jobs">Jobs</a></li>
                </ul>
              </li>
              <li><a href="index.html#common-resources">Common Resources</a>
                <ul>
                  <li><a href="index.html#@execute()">@execute()</a></li>
                  <li><a href="index.html#@package-update()">@package_update()</a></li>
                  <li><a href="index.html#@install()">@install()</a></li>
                  <li><a href="index.html#@uninstall()">@uninstall()</a></li>
                  <li><a href="index.html#@directory()">@directory()</a></li>
                  <li><a href="index.html#@chown()">@chown()</a></li>
                  <li><a href="index.html#@chmod()">@chmod()</a></li>
                  <li><a href="index.html#@template()">@template()</a></li>
                  <li><a href="index.html#@upload()">@upload()</a></li>
                  <li><a href="index.html#@download()">@download()</a></li>
                  <li><a href="index.html#@link()">@link()</a></li>
                  <li><a href="index.html#@append-line-to-file()">@append_line_to_file()</a></li>
                  <li><a href="index.html#@replace-line-in-file()">@replace_line_in_file()</a></li>
                  <li><a href="index.html#@user()">@user()</a></li>
                  <li><a href="index.html#@group()">@group()</a></li>
                  <li><a href="index.html#@deploy()">@deploy()</a></li>
                  <li><a href="index.html#@reboot()">@reboot()</a></li>
                </ul>
              </li>
              <li><a href="index.html#third-party-resources">Third-Party Resources</a>
                <ul>
                </ul>
              </li>
              <li><a href="index.html#contributing">Contributing</a>
                <ul>
                  <li><a href="index.html#issuing-a-pull-request">Issuing a Pull Request</a></li>
                </ul>
              </li>
            </ol>
          </div>
        </div>
      </aside>
      <footer>
        <div class="wrapper">
          <div class="left">
            <p>This documentation is licensed <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0</a></p>
            <p>"Borg" is a service mark of <a href="http://smullindesign.com">Smullin Design</a>.</p>
          </div>
          <div class="right"><a href="index.html#top">Back to top &uarr;</a></div>
          <div class="clear"></div>
        </div>
      </footer>
    </div>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Rambla:400,700|Source+Sans+Pro:400,600">
    <link rel="stylesheet" href="stylesheets/monokai_sublime.css">
    <script src="behaviors/highlight.pack.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
      
      
    </script>
  </body>
</html>